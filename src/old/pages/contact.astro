---
import Layout from '~/layouts/PageLayout.astro';
import HeroText from '~/components/widgets/HeroText.astro';
import Features2 from '~/components/widgets/Features2.astro';

const metadata = {
  title: 'Contact Altitude Consulting',
};
---

<Layout metadata={metadata}>
  <!-- HeroText Widget ******************* -->

  <HeroText 
    tagline="<span class='mb-4 block'>Contact</span>" 
    title="<span class='pt-4 block'>Ready to Build Your AI Center of Excellence?</span>" 
  />

  <!-- Contact Form Section ******************* -->
  
  <section class="px-6 sm:px-6 py-12 sm:py-16 lg:py-20 mx-auto max-w-4xl">
    <div class="text-center mb-8">
      <h3 class="text-2xl font-bold bg-gradient-to-r from-teal-500 via-blue-600 to-indigo-600 text-transparent bg-clip-text mb-4 border-b-2 border-gradient-to-r from-teal-500 to-blue-600 pb-2 inline-block uppercase tracking-wide">
        Request a Strategic Consultation
      </h3>
      <p class="text-lg text-[#6E7C87] dark:text-gray-400 mb-8">
        Let's talk about how AI can give your firm a strategic edge. Reach out directly or request an executive briefing.
      </p>
    </div>
    
    <div class="flex flex-col max-w-xl mx-auto rounded-lg backdrop-blur border border-[#F4F5F7] dark:border-gray-700 bg-white dark:bg-slate-900 shadow-lg p-4 sm:p-6 lg:p-8 w-full">
      <form id="contactForm" action="https://formspree.io/f/mgvyrwld" method="POST" class="space-y-6">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          <div>
            <label for="name" class="block text-sm font-medium text-[#0B1D3A] dark:text-gray-300 mb-2">Full Name</label>
            <input type="text" id="name" name="name" class="w-full px-4 py-3 border border-[#F4F5F7] dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white" required>
          </div>
          <div>
            <label for="email" class="block text-sm font-medium text-[#0B1D3A] dark:text-gray-300 mb-2">Work Email Address</label>
            <input type="email" id="email" name="email" class="w-full px-4 py-3 border border-[#F4F5F7] dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white" required>
          </div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          <div>
            <label for="organization" class="block text-sm font-medium text-[#0B1D3A] dark:text-gray-300 mb-2">Organization Name</label>
            <input type="text" id="organization" name="organization" class="w-full px-4 py-3 border border-[#F4F5F7] dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white" required>
          </div>
          <div>
            <label for="role" class="block text-sm font-medium text-[#0B1D3A] dark:text-gray-300 mb-2">Your Role / Title</label>
            <input type="text" id="role" name="role" class="w-full px-4 py-3 border border-[#F4F5F7] dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white" required>
          </div>
        </div>
        <div>
          <label for="challenge" class="block text-sm font-medium text-[#0B1D3A] dark:text-gray-300 mb-2">What's the biggest AI-related challenge your firm is facing right now?</label>
          <textarea id="challenge" name="challenge" rows="5" placeholder="Describe your current AI challenge, e.g. vendor overwhelm, regulatory uncertainty, cross-department misalignment, etc." class="w-full px-4 py-3 border border-[#F4F5F7] dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white" required></textarea>
        </div>
        <div>
          <label class="block text-sm font-medium text-[#0B1D3A] dark:text-gray-300 mb-2">Are you interested in a private briefing or a full engagement roadmap?</label>
          <div class="flex flex-col sm:flex-row gap-4">
            <label class="inline-flex items-center">
              <input type="radio" name="engagement" value="Executive Briefing" class="form-radio text-blue-600" required>
              <span class="ml-2">Executive Briefing</span>
            </label>
            <label class="inline-flex items-center">
              <input type="radio" name="engagement" value="Strategic Roadmap" class="form-radio text-blue-600">
              <span class="ml-2">Strategic Roadmap</span>
            </label>
            <label class="inline-flex items-center">
              <input type="radio" name="engagement" value="Not Sure Yet" class="form-radio text-blue-600">
              <span class="ml-2">Not Sure Yet</span>
            </label>
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-[#0B1D3A] dark:text-gray-300 mb-2">Best way to reach you?</label>
          <div class="flex flex-col sm:flex-row gap-4">
            <label class="inline-flex items-center">
              <input type="radio" name="contact_method" value="Phone" class="form-radio text-blue-600" required>
              <span class="ml-2">Phone</span>
            </label>
            <label class="inline-flex items-center">
              <input type="radio" name="contact_method" value="Email" class="form-radio text-blue-600">
              <span class="ml-2">Email</span>
            </label>
            <label class="inline-flex items-center">
              <input type="radio" name="contact_method" value="Assistant Contact" class="form-radio text-blue-600">
              <span class="ml-2">Assistant Contact</span>
            </label>
          </div>
        </div>
        <div class="text-sm text-[#6E7C87] dark:text-gray-400">
          By submitting this form, you agree to receive communications from Altitude Consulting regarding AI strategy consulting services.
        </div>
        <button type="submit" id="submitBtn" class="w-full bg-gradient-to-r from-teal-500 via-blue-600 to-indigo-600 hover:from-teal-600 hover:via-blue-700 hover:to-indigo-700 text-white font-medium py-3 px-6 rounded-lg transition duration-200 shadow-lg">
          Send Message
        </button>
        <div id="formMessage" class="hidden text-center p-3 rounded-lg"></div>
        <p class="text-sm text-[#6E7C87] dark:text-gray-400 text-center">
          We typically respond within one to two business days to discuss how we can help your firm build a strategic AI Center of Excellence.
        </p>
      </form>
    </div>
  </section>

  <!-- Features2 Widget ************** -->

  <Features2
    title="How I can help your firm"
    items={[
      {
        title: 'AI Strategy Development',
        description: `Board-ready AI Center of Excellence blueprints tailored to your firm's size, compliance requirements, and operational needs. Includes governance frameworks, risk oversight, and implementation roadmaps.`,
      },
      {
        title: 'Cross-Department Alignment',
        description:
          'Bridge the gap between IT, legal, compliance, and operations teams. Create unified AI strategies that align departments and eliminate siloed initiatives.',
      },
      {
        title: 'Vendor Evaluation & Selection',
        description:
          'Cut through vendor overwhelm with strategic evaluation frameworks. Identify solutions that match your security requirements, ROI goals, and integration needs.',
      },
      {
        title: 'Talent Strategy & Hiring',
        description: 'Define the right AI roles, skills, and organizational structure for your firm. Avoid costly hiring mistakes with proven job descriptions and capability frameworks.',
      },
      {
        title: 'AI Governance & Compliance',
        description: 'Establish robust governance frameworks and ensure your AI initiatives meet regulatory requirements and industry standards.',
      },
      {
        title: 'Change Management & Training',
        description: 'Drive successful AI adoption with tailored change management strategies and executive/employee training programs.',
      },
    ]}
  />

  <!-- Office Locations Section -->
  <section class="px-6 sm:px-6 py-12 sm:py-16 lg:py-20 mx-auto max-w-4xl">
    <div class="text-center mb-8">
      <h3 class="text-2xl font-bold bg-gradient-to-r from-teal-500 via-blue-600 to-indigo-600 text-transparent bg-clip-text mb-4 border-b-2 border-gradient-to-r from-teal-500 to-blue-600 pb-2 inline-block uppercase tracking-wide">
        Our Offices
      </h3>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-8 max-w-2xl mx-auto">
      <div class="bg-white dark:bg-slate-900 rounded-lg shadow p-6 border border-[#F4F5F7] dark:border-gray-700">
        <div class="flex items-center mb-2">
          <span class="mr-2 text-2xl text-blue-600"><i class="tabler:map-pin"></i></span>
          <span class="font-semibold text-lg">New York Office</span>
        </div>
        <div class="text-[#6E7C87] dark:text-gray-400 text-base">
          +1 646 846 6400<br>477 Madison Avenue<br>Manhattan New York 10022
        </div>
      </div>
      <div class="bg-white dark:bg-slate-900 rounded-lg shadow p-6 border border-[#F4F5F7] dark:border-gray-700">
        <div class="flex items-center mb-2">
          <span class="mr-2 text-2xl text-blue-600"><i class="tabler:map-pin"></i></span>
          <span class="font-semibold text-lg">Sydney Office</span>
        </div>
        <div class="text-[#6E7C87] dark:text-gray-400 text-base">
          +61 2 8188 4400<br>20 Martin Place<br>Sydney NSW 2000
        </div>
      </div>
    </div>
  </section>
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    console.log('=== CONTACT FORM SCRIPT LOADED ===');
    
    const form = document.getElementById('contactForm') as HTMLFormElement;
    const submitBtn = document.getElementById('submitBtn') as HTMLButtonElement;
    const formMessage = document.getElementById('formMessage') as HTMLDivElement;

    if (!form || !submitBtn || !formMessage) {
      console.error('Required form elements not found');
      return;
    }

    console.log('Form elements found successfully');

    // Add form validation before submission
    function validateForm(formData: FormData): string[] {
      const errors: string[] = [];
      const requiredFields = ['name', 'email', 'organization', 'role', 'challenge', 'engagement', 'contact_method'];
      
      for (const field of requiredFields) {
        const value = formData.get(field);
        if (!value || (typeof value === 'string' && value.trim() === '')) {
          errors.push(field);
        }
      }
      
      // Basic email validation
      const email = formData.get('email');
      if (email && typeof email === 'string') {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          errors.push('email');
        }
      }
      
      return errors;
    }

    form.addEventListener('submit', async function(e) {
      console.log('=== FORM SUBMISSION STARTED ===');
      
      // Client-side validation
      const formData = new FormData(form);
      const validationErrors = validateForm(formData);
      if (validationErrors.length > 0) {
        e.preventDefault();
        formMessage.textContent = `Please fill in all required fields: ${validationErrors.join(', ')}`;
        formMessage.className = 'text-center p-3 rounded-lg bg-red-100 text-red-800 border border-red-200 dark:bg-red-900 dark:text-red-200';
        formMessage.classList.remove('hidden');
        return;
      }
      
      // Disable submit button and show loading state
      submitBtn.disabled = true;
      submitBtn.textContent = 'Sending...';
      
      // Hide any previous messages
      formMessage.classList.add('hidden');
      
      // Formspree will handle the submission automatically
      // We just need to show a success message after a delay
      setTimeout(() => {
        formMessage.textContent = 'Thank you! Your message has been sent successfully. We\'ll get back to you within one to two business days.';
        formMessage.className = 'text-center p-3 rounded-lg bg-green-100 text-green-800 border border-green-200 dark:bg-green-900 dark:text-green-200';
        formMessage.classList.remove('hidden');
        form.reset();
        submitBtn.disabled = false;
        submitBtn.textContent = 'Send Message';
      }, 2000);
    });
    
    console.log('Form submit event listener attached');
  });
</script>
